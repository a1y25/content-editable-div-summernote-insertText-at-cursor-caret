<link rel="stylesheet" href="bs.css">
<link rel="stylesheet" href="sn.css">

<div class="container">
	<textarea name="" id="sn" cols="30" rows="10"></textarea>
	
	<button id="caret">First Name, Caret</button>
</div>

<script src="jquery.js"></script>
<script src="bs.js"></script>
<script src="sn.js"></script>

<script>

	$('#sn').summernote();
	var lastCaretPos = 0;
	var parentNode;
	var range;
	var selection;

	$('.note-editable').on('keyup mouseup',function (e){

		selection = window.getSelection();
		range = selection.getRangeAt(0);
		parentNode = range.commonAncestorContainer.parentNode;
	});

	$('#caret').click(function (e){
			
		console.log(parentNode);

		if($(parentNode).parents().is('.note-editable') || $(parentNode).is('.note-editable') ){
        	var span = document.createElement('span');	    
	        span.setAttribute('style','font-style:italic');
	    	span.innerHTML="${firstName}";
			
			range.deleteContents();        
	        range.insertNode(span);  
	        //cursor at the last with this
	        range.collapse(false);
	        selection.removeAllRanges();
			selection.addRange(range);

		}else{
			return;
		}
	});

</script>

